--
-- Script was generated by Devart dbForge Studio 2019 for SQL Server, Version 5.8.127.0
-- Product home page: http://www.devart.com/dbforge/sql/studio
-- Script date 7/16/2021 3:41:51 AM
-- Server version: 15.00.2000
--


SET DATEFORMAT ymd
SET ARITHABORT, ANSI_PADDING, ANSI_WARNINGS, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER, ANSI_NULLS, NOCOUNT ON
SET NUMERIC_ROUNDABORT, IMPLICIT_TRANSACTIONS, XACT_ABORT OFF
GO
USE master
GO

IF DB_NAME() <> N'master' SET NOEXEC ON

--
-- Create database [LeaderGroupTaskDb]
--
PRINT (N'Create database [LeaderGroupTaskDb]')
GO
CREATE DATABASE LeaderGroupTaskDb
GO
--
-- Alter database
--
PRINT (N'Alter database')
GO
ALTER DATABASE LeaderGroupTaskDb
  SET
    ANSI_NULL_DEFAULT OFF,
    ANSI_NULLS OFF,
    ANSI_PADDING OFF,
    ANSI_WARNINGS OFF,
    ARITHABORT OFF,
    AUTO_CLOSE OFF,
    AUTO_CREATE_STATISTICS ON,
    AUTO_SHRINK OFF,
    AUTO_UPDATE_STATISTICS ON,
    AUTO_UPDATE_STATISTICS_ASYNC OFF,
    COMPATIBILITY_LEVEL = 150,
    CONCAT_NULL_YIELDS_NULL OFF,
    CURSOR_CLOSE_ON_COMMIT OFF,
    CURSOR_DEFAULT GLOBAL,
    DATE_CORRELATION_OPTIMIZATION OFF,
    DB_CHAINING OFF,
    HONOR_BROKER_PRIORITY OFF,
    MULTI_USER,
    NESTED_TRIGGERS = ON,
    NUMERIC_ROUNDABORT OFF,
    PAGE_VERIFY CHECKSUM,
    PARAMETERIZATION SIMPLE,
    QUOTED_IDENTIFIER OFF,
    READ_COMMITTED_SNAPSHOT ON,
    RECOVERY FULL,
    RECURSIVE_TRIGGERS OFF,
    TRANSFORM_NOISE_WORDS = OFF,
    TRUSTWORTHY OFF
    WITH ROLLBACK IMMEDIATE
GO

ALTER DATABASE LeaderGroupTaskDb
  SET ENABLE_BROKER
GO

ALTER DATABASE LeaderGroupTaskDb
  SET ALLOW_SNAPSHOT_ISOLATION OFF
GO

ALTER DATABASE LeaderGroupTaskDb
  SET FILESTREAM (NON_TRANSACTED_ACCESS = OFF)
GO

ALTER DATABASE LeaderGroupTaskDb
  SET QUERY_STORE = OFF
GO

USE LeaderGroupTaskDb
GO

ALTER DATABASE SCOPED CONFIGURATION SET MAXDOP = 0;
GO

ALTER DATABASE SCOPED CONFIGURATION FOR SECONDARY SET MAXDOP = PRIMARY;
GO

ALTER DATABASE SCOPED CONFIGURATION SET LEGACY_CARDINALITY_ESTIMATION = OFF;
GO

ALTER DATABASE SCOPED CONFIGURATION FOR SECONDARY SET LEGACY_CARDINALITY_ESTIMATION = PRIMARY;
GO

ALTER DATABASE SCOPED CONFIGURATION SET PARAMETER_SNIFFING = ON;
GO

ALTER DATABASE SCOPED CONFIGURATION FOR SECONDARY SET PARAMETER_SNIFFING = PRIMARY;
GO

ALTER DATABASE SCOPED CONFIGURATION SET QUERY_OPTIMIZER_HOTFIXES = OFF;
GO

ALTER DATABASE SCOPED CONFIGURATION FOR SECONDARY SET QUERY_OPTIMIZER_HOTFIXES = PRIMARY;
GO

USE LeaderGroupTaskDb
GO

IF DB_NAME() <> N'LeaderGroupTaskDb' SET NOEXEC ON
GO

--
-- Create table [dbo].[Users]
--
PRINT (N'Create table [dbo].[Users]')
GO
CREATE TABLE dbo.Users (
  Id int IDENTITY,
  FirstName nvarchar(max) NULL,
  LastName nvarchar(max) NULL,
  Username nvarchar(max) NULL,
  PasswordHash varbinary(max) NULL,
  PasswordSalt varbinary(max) NULL,
  Role nvarchar(max) NULL,
  CONSTRAINT PK_Users PRIMARY KEY CLUSTERED (Id)
)
ON [PRIMARY]
TEXTIMAGE_ON [PRIMARY]
GO

--
-- Create table [dbo].[Products]
--
PRINT (N'Create table [dbo].[Products]')
GO
CREATE TABLE dbo.Products (
  Id int IDENTITY,
  CreationTime datetime2 NOT NULL,
  LastModificationTime datetime2 NULL,
  Name nvarchar(max) NULL,
  Description nvarchar(max) NULL,
  Metadata nvarchar(max) NULL,
  CategoryId int NOT NULL,
  DeletionTime datetime2 NULL,
  IsDeleted bit NULL,
  CONSTRAINT PK_Products PRIMARY KEY CLUSTERED (Id)
)
ON [PRIMARY]
TEXTIMAGE_ON [PRIMARY]
GO

--
-- Create index [IX_Products_CategoryId] on table [dbo].[Products]
--
PRINT (N'Create index [IX_Products_CategoryId] on table [dbo].[Products]')
GO
CREATE INDEX IX_Products_CategoryId
  ON dbo.Products (CategoryId)
  ON [PRIMARY]
GO

--
-- Create table [dbo].[Categories]
--
PRINT (N'Create table [dbo].[Categories]')
GO
CREATE TABLE dbo.Categories (
  Id int IDENTITY,
  CreationTime datetime2 NOT NULL,
  LastModificationTime datetime2 NULL,
  Name nvarchar(max) NULL,
  Metadata nvarchar(max) NULL,
  DeletionTime datetime2 NULL,
  IsDeleted bit NULL,
  CONSTRAINT PK_Categories PRIMARY KEY CLUSTERED (Id)
)
ON [PRIMARY]
TEXTIMAGE_ON [PRIMARY]
GO

--
-- Create table [dbo].[__EFMigrationsHistory]
--
PRINT (N'Create table [dbo].[__EFMigrationsHistory]')
GO
CREATE TABLE dbo.__EFMigrationsHistory (
  MigrationId nvarchar(150) NOT NULL,
  ProductVersion nvarchar(32) NOT NULL,
  CONSTRAINT PK___EFMigrationsHistory PRIMARY KEY CLUSTERED (MigrationId)
)
ON [PRIMARY]
GO
-- 
-- Dumping data for table __EFMigrationsHistory
--
PRINT (N'Dumping data for table __EFMigrationsHistory')
INSERT dbo.__EFMigrationsHistory VALUES (N'20210713192612_InitCreate', N'3.1.17')
INSERT dbo.__EFMigrationsHistory VALUES (N'20210713211158_AddNewTables', N'3.1.17')
INSERT dbo.__EFMigrationsHistory VALUES (N'20210713211446_UpdateProductsTable', N'3.1.17')
INSERT dbo.__EFMigrationsHistory VALUES (N'20210715100132_AddDeletionInfo', N'3.1.17')
GO
-- 
-- Dumping data for table Categories
--
PRINT (N'Dumping data for table Categories')
SET IDENTITY_INSERT dbo.Categories ON
GO
INSERT dbo.Categories(Id, CreationTime, LastModificationTime, Name, Metadata, DeletionTime, IsDeleted) VALUES (2, '2021-07-15 12:43:08.0000000', '2021-07-15 17:18:05.5711330', N'Bikes', N'M1, M2, M3, M4', NULL, NULL)
INSERT dbo.Categories(Id, CreationTime, LastModificationTime, Name, Metadata, DeletionTime, IsDeleted) VALUES (3, '2021-07-15 12:43:08.0000000', '2021-07-15 17:19:53.2152650', N'Components', N'J1, J2, J3', NULL, NULL)
INSERT dbo.Categories(Id, CreationTime, LastModificationTime, Name, Metadata, DeletionTime, IsDeleted) VALUES (4, '2021-07-15 12:43:08.0000000', '2021-07-15 17:19:54.9217681', N'Clothing', N'X1, X2, X3', NULL, NULL)
INSERT dbo.Categories(Id, CreationTime, LastModificationTime, Name, Metadata, DeletionTime, IsDeleted) VALUES (5, '2021-07-15 12:43:08.0000000', '2021-07-15 17:19:56.6168063', N'Accessories', N'Z1, Z2, Z3', NULL, NULL)
INSERT dbo.Categories(Id, CreationTime, LastModificationTime, Name, Metadata, DeletionTime, IsDeleted) VALUES (6, '2021-07-15 17:24:14.2714451', '2021-07-15 17:25:34.5604132', N'Amazing Category', N'A1, A2, A3', NULL, NULL)
GO
SET IDENTITY_INSERT dbo.Categories OFF
GO
-- 
-- Dumping data for table Products
--
PRINT (N'Dumping data for table Products')
SET IDENTITY_INSERT dbo.Products ON
GO
INSERT dbo.Products(Id, CreationTime, LastModificationTime, Name, Description, Metadata, CategoryId, DeletionTime, IsDeleted) VALUES (1, '2021-07-16 00:15:40.0000000', '2021-07-16 03:22:18.8283812', N'Adjustable Race One', NULL, N'M1, M4', 2, NULL, NULL)
INSERT dbo.Products(Id, CreationTime, LastModificationTime, Name, Description, Metadata, CategoryId, DeletionTime, IsDeleted) VALUES (2, '2021-07-16 00:15:40.0000000', '2021-07-16 03:16:27.2868704', N'Bearing Ball', NULL, N'M1', 2, NULL, NULL)
INSERT dbo.Products(Id, CreationTime, LastModificationTime, Name, Description, Metadata, CategoryId, DeletionTime, IsDeleted) VALUES (3, '2021-07-16 00:15:40.0000000', NULL, N'BB Ball Bearing', NULL, NULL, 2, NULL, NULL)
INSERT dbo.Products(Id, CreationTime, LastModificationTime, Name, Description, Metadata, CategoryId, DeletionTime, IsDeleted) VALUES (4, '2021-07-16 00:15:40.0000000', '2021-07-16 03:26:42.1729064', N'Headset Ball Bearings', NULL, N'Z1', 5, NULL, NULL)
INSERT dbo.Products(Id, CreationTime, LastModificationTime, Name, Description, Metadata, CategoryId, DeletionTime, IsDeleted) VALUES (5, '2021-07-16 00:15:40.0000000', NULL, N'Blade', NULL, NULL, 3, NULL, NULL)
INSERT dbo.Products(Id, CreationTime, LastModificationTime, Name, Description, Metadata, CategoryId, DeletionTime, IsDeleted) VALUES (6, '2021-07-16 00:15:40.0000000', NULL, N'LL Crankarm', NULL, NULL, 4, NULL, NULL)
INSERT dbo.Products(Id, CreationTime, LastModificationTime, Name, Description, Metadata, CategoryId, DeletionTime, IsDeleted) VALUES (7, '2021-07-16 00:15:40.0000000', NULL, N'ML Crankarm', NULL, NULL, 4, NULL, NULL)
INSERT dbo.Products(Id, CreationTime, LastModificationTime, Name, Description, Metadata, CategoryId, DeletionTime, IsDeleted) VALUES (8, '2021-07-16 00:15:40.0000000', NULL, N'HL Crankarm', NULL, NULL, 4, NULL, NULL)
INSERT dbo.Products(Id, CreationTime, LastModificationTime, Name, Description, Metadata, CategoryId, DeletionTime, IsDeleted) VALUES (9, '2021-07-16 00:15:40.0000000', NULL, N'Chainring Bolts', NULL, NULL, 5, NULL, NULL)
INSERT dbo.Products(Id, CreationTime, LastModificationTime, Name, Description, Metadata, CategoryId, DeletionTime, IsDeleted) VALUES (10, '2021-07-16 00:15:40.0000000', NULL, N'Chainring Nut', NULL, NULL, 5, NULL, NULL)
INSERT dbo.Products(Id, CreationTime, LastModificationTime, Name, Description, Metadata, CategoryId, DeletionTime, IsDeleted) VALUES (59, '2021-07-16 03:34:59.9006345', NULL, N'TEST PRODUCT', NULL, N'J1', 3, '2021-07-16 03:40:34.9828338', CONVERT(bit, 'True'))
INSERT dbo.Products(Id, CreationTime, LastModificationTime, Name, Description, Metadata, CategoryId, DeletionTime, IsDeleted) VALUES (60, '2021-07-16 03:35:19.1424775', NULL, N'THIS A PRODUCT', NULL, N' X2', 4, '2021-07-16 03:40:35.0115383', CONVERT(bit, 'True'))
GO
SET IDENTITY_INSERT dbo.Products OFF
GO
-- 
-- Dumping data for table Users
--
PRINT (N'Dumping data for table Users')
SET IDENTITY_INSERT dbo.Users ON
GO
INSERT dbo.Users(Id, FirstName, LastName, Username, PasswordHash, PasswordSalt, Role) VALUES (1, N'Admin', N'admin', N'admin', 0x57CFCACAA5E8BE6CCD7358FE47B20D5B579552B0D38FE7C50654EB2B26953B43806AEFA79CDD5E23F77F076B63E5EB0B350EB89284AB38D6BAF944B04F4C6AC5, 0x0957D3F3AAE59E98FA3DF1B2376D91FAAF9F1292D06A834785D55130944738083FEC30E66E2F56D4356D8C7D08FF64EAC3D5BCFDAC26CE0758FF425A9D70FF226D7E0F1AD72ECD016C00E65108E96A7840AB451A745FDD2F87AA5A6D9169B1978E3AAA04C96E5ED22EA25B49EECBE6C6A60BC9F31B4A096DE3ED115BCF48B15D, N'Admin')
INSERT dbo.Users(Id, FirstName, LastName, Username, PasswordHash, PasswordSalt, Role) VALUES (2, N'Manager', N'manager', N'manager', 0x57CFCACAA5E8BE6CCD7358FE47B20D5B579552B0D38FE7C50654EB2B26953B43806AEFA79CDD5E23F77F076B63E5EB0B350EB89284AB38D6BAF944B04F4C6AC5, 0x0957D3F3AAE59E98FA3DF1B2376D91FAAF9F1292D06A834785D55130944738083FEC30E66E2F56D4356D8C7D08FF64EAC3D5BCFDAC26CE0758FF425A9D70FF226D7E0F1AD72ECD016C00E65108E96A7840AB451A745FDD2F87AA5A6D9169B1978E3AAA04C96E5ED22EA25B49EECBE6C6A60BC9F31B4A096DE3ED115BCF48B15D, N'Manager')
INSERT dbo.Users(Id, FirstName, LastName, Username, PasswordHash, PasswordSalt, Role) VALUES (1002, N'Customer', N'customer', N'customer', 0x57CFCACAA5E8BE6CCD7358FE47B20D5B579552B0D38FE7C50654EB2B26953B43806AEFA79CDD5E23F77F076B63E5EB0B350EB89284AB38D6BAF944B04F4C6AC5, 0x0957D3F3AAE59E98FA3DF1B2376D91FAAF9F1292D06A834785D55130944738083FEC30E66E2F56D4356D8C7D08FF64EAC3D5BCFDAC26CE0758FF425A9D70FF226D7E0F1AD72ECD016C00E65108E96A7840AB451A745FDD2F87AA5A6D9169B1978E3AAA04C96E5ED22EA25B49EECBE6C6A60BC9F31B4A096DE3ED115BCF48B15D, N'Customer')
GO
SET IDENTITY_INSERT dbo.Users OFF
GO

USE LeaderGroupTaskDb
GO

IF DB_NAME() <> N'LeaderGroupTaskDb' SET NOEXEC ON
GO

--
-- Create foreign key [FK_Products_Categories_CategoryId] on table [dbo].[Products]
--
PRINT (N'Create foreign key [FK_Products_Categories_CategoryId] on table [dbo].[Products]')
GO
ALTER TABLE dbo.Products
  ADD CONSTRAINT FK_Products_Categories_CategoryId FOREIGN KEY (CategoryId) REFERENCES dbo.Categories (Id) ON DELETE CASCADE
GO
SET NOEXEC OFF
GO